<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Card Generator</title>
  <link rel="icon" href="https://paraliyzed.net/img/logo.jpg" type="image/jpeg">
  <style>
    @font-face {
      font-family: "UniSansCapsBold";
      src: url("Uni Sans Heavy Caps.ttf") format("truetype");
      font-weight: bold;
    }

    @font-face {
      font-family: "UniSansCapsThin";
      src: url("Uni Sans Thin Caps.ttf") format("truetype");
      font-weight: normal;
    }

    body {
      background-color: #39252b;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 2rem;
    }

    h1 {
      font-family: "UniSansCapsBold", sans-serif;
      font-size: 48px;
      color: #ffffff;
      margin: 0.1rem 0;
    }

    h2 {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 24px;
      color: #ffffff;
      margin: 0.1rem 0;
    }

    h2 a {
      text-decoration: none;
      color: #c792ea;
    }

    h2 a:hover {
      color: rgb(38, 150, 255);
    }

    input {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 36.4px;
      line-height: 36.4px;
      color: rgba(255, 255, 255, 0.5);
      background-color: #513f45;
      border: none;
      width: 800px;
      height: 112px;
      padding: calc((112px - 36.4px) / 2) 20px;
      box-sizing: border-box;
      margin: 1rem 0;
      text-align: left;
      border-radius: 20px;
    }

    input::placeholder {
      text-align: left;
      color: rgba(255, 255, 255, 0.5);
    }

    button {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 36.4px;
      line-height: 36.4px;
      color: rgba(255, 255, 255, 0.5);
      background-color: #513f45;
      border: none;
      width: 280px;
      height: 70px;
      cursor: pointer;
      margin: 1rem 0;
      padding: calc((70px - 36.4px) / 2) calc((280px - 227.6px) / 2);
      box-sizing: border-box;
      text-align: center;
      border-radius: 15px;
    }

    .link-output,
    .error {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 1rem;
      text-align: center;
    }

    .error {
      color: red;
    }

    .banner {
      display: block;
      margin-bottom: 1rem;
    }

    .cards-row {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 2rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    .card-label {
      font-family: "UniSansCapsBold", sans-serif;
      font-size: 20px;
      color: #ffffff;
      margin-bottom: 0.5rem;
    }

    .card-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .card-container img {
      display: block;
      margin: 0 auto 1rem;
      height: 100px;
      width: auto;
    }

    .copy-box {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 100%;
      color: rgba(255, 255, 255, 0.5);
      background-color: #513f45;
      border: none;
      width: 727px;
      height: 40px;
      margin: 0.5rem auto 2rem;
      border-radius: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 15px;
      box-sizing: border-box;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: center;
    }

    .copy-box:focus {
      outline: none;
    }

    .copy-group {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .copy-group label {
      font-family: "UniSansCapsThin", sans-serif;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 0.3rem;
      text-align: center;
    }

    .toast-container {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10000;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .toast {
      background: #2d3748;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      margin-top: 10px;
      opacity: 0;
      transform: translateY(-100px);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      max-width: 350px;
      pointer-events: auto;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    .toast.success {
      background: #38a169;
      border-left: 4px solid #2f855a;
    }

    .toast-icon {
      font-size: 16px;
      flex-shrink: 0;
    }

    .toast-message {
      font-size: 14px;
      line-height: 1.4;
    }
  </style>
</head>
<script defer src="https://cdn.vercel-insights.com/v1/script.debug.js"></script>
<script defer src="https://cdn.vercel-scripts.com/speed-insights/script.js"></script>

<body>
  <div class="toast-container" id="toastContainer"></div>
  <a href="https://discord.com/invite/rkURq6wVTU" target="_blank">
    <img src="https://paraliyzed.net/img/horizontalbannerA.png" alt="Banner" class="banner">
  </a>
  <h1>osu!Challengers Card Generator</h1>
  <h2>Made by <a href="https://paraliyzed.net" target="_blank">Paraliyzed_evo</a></h2>
  <input type="text" id="userId" placeholder="Enter User ID">
  <button id="generateBtn">Generate</button>

  <div class="link-output" id="linkOutput"></div>
  <div class="error" id="errorOutput"></div>

  <script>
    function showToast(message, type = 'success') {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      const icon = type === 'success' ? '✓' : 'ℹ';
      toast.innerHTML = `
          <span class="toast-icon">${icon}</span>
          <span class="toast-message">${message}</span>
      `;

      container.appendChild(toast);
      setTimeout(() => {
        toast.classList.add('show');
      }, 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          if (container.contains(toast)) {
            container.removeChild(toast);
          }
        }, 300);
      }, 3000);
    }
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showToast("Copied to clipboard!");
      }).catch(() => {
        showToast("Failed to copy to clipboard", 'error');
      });
    }

    const generateBtn = document.getElementById("generateBtn");
    const userIdInput = document.getElementById("userId");
    const linkOutput = document.getElementById("linkOutput");
    const errorOutput = document.getElementById("errorOutput");

    function generateCopyBoxes(url, userId, label) {
      const profileUrl = `https://osu.ppy.sh/users/${userId}`;
      return `
		<div class="copy-group">
		  <label>URL</label>
		  <input class="copy-box" type="text" value="${url}" readonly onclick="copyToClipboard('${url}')">
		</div>
		<div class="copy-group">
		  <label>Markdown (just image)</label>
		  <input class="copy-box" type="text" value="![${label}](${url})" readonly onclick="copyToClipboard('![${label}](${url})')">
		</div>
		<div class="copy-group">
		  <label>Markdown with link to osu! profile</label>
		  <input class="copy-box" type="text" value="[![${label}](${url})](${profileUrl})" readonly onclick="copyToClipboard('[![${label}](${url})](${profileUrl})')">
		</div>
		<div class="copy-group">
		  <label>BBCode (just image)</label>
		  <input class="copy-box" type="text" value="[img]${url}[/img]" readonly onclick="copyToClipboard('[img]${url}[/img]')">
		</div>
		<div class="copy-group">
		  <label>BBCode with link to osu! profile</label>
		  <input class="copy-box" type="text" value="[url=${profileUrl}][img]${url}[/img][/url]" readonly onclick="copyToClipboard('[url=${profileUrl}][img]${url}[/img][/url]')">
		</div>
		<div class="copy-group">
		  <label>HTML (just image)</label>
		  <input class="copy-box" type="text" value="<img src='${url}' alt='${label}'>" readonly onclick="copyToClipboard('<img src=\'${url}\' alt=\'${label}\'>')">
		</div>
		<div class="copy-group">
		  <label>HTML with link to osu! profile</label>
		  <input class="copy-box" type="text" value="<a href='${profileUrl}'><img src='${url}' alt='${label}'></a>" readonly onclick="copyToClipboard('<a href=\'${profileUrl}\'><img src=\'${url}\' alt=\'${label}\'></a>')">
		</div>
	  `;
    }

    generateBtn.addEventListener("click", async () => {
      const id = userIdInput.value.trim();
      if (!id) {
        showToast("Please enter a User ID", "error");
        return;
      }
      
      showToast("Generating card...");

      const apiUrl = `https://api.paraliyzed.net/api/card?id=${encodeURIComponent(id)}`;
      const apiUrlMini = `https://api.paraliyzed.net/api/card?id=${encodeURIComponent(id)}&option=mini`;

      linkOutput.innerHTML = "";
      errorOutput.textContent = "";

      try {
        const res = await fetch(apiUrl, { method: "GET" });

        if (res.status === 404) {
          errorOutput.textContent = "User not found (404)";
          showToast("User not found!", "error");
          return;
        }

        if (!res.ok) {
          errorOutput.textContent = `Error: ${res.status} ${res.statusText}`;
          showToast("Error fetching card", "error");
          return;
        }

        linkOutput.innerHTML = `
        <div class="cards-row">
          <div class="card-container">
            <div class="card-label">Full</div>
            <img src="${apiUrl}" alt="Main Card">
            ${generateCopyBoxes(apiUrl, id, "Main Card")}
          </div>
          <div class="card-container">
            <div class="card-label">Mini</div>
            <img id="mini" src="${apiUrlMini}" alt="Mini Card">
            ${generateCopyBoxes(apiUrlMini, id, "Mini Card")}
          </div>
        </div>
      `;
        showToast("Card generated successfully!");
      } catch (err) {
        errorOutput.textContent = "Network error: " + err.message;
        showToast("Network error", "error");
      }
    });
  </script>
</body>

</html>